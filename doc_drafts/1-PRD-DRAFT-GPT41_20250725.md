# Product Requirements Document (PRD) – Segment & Vintage Level Forecasting

## 1. Objective
Forecast monthly principal payments, remaining balances, and charge-offs at the segment and vintage level, using survival/hazard modeling, for the expected life of each vintage.

## 2. Stakeholders
- Portfolio Analytics
- Finance/Risk Teams
- Data Science

## 3. Requirements

### 3.1. Data Requirements
- Aggregated loan data by segment and vintage
- Monthly principal outstanding, payments, charge-offs
- Right-censored data handling

### 3.2. Functional Requirements
- Calculate and forecast:
  - Monthly expected payment % per segment/vintage
  - Monthly expected charge-off % per segment/vintage
  - Remaining principal balance over time
- Use survival/hazard modeling to estimate rates
- Allow plugging in externally provided rates (e.g., from Excel models)
- Handle right-censored data appropriately

### 3.3. Non-Functional Requirements
- Forecasts must be reproducible and explainable
- Outputs must be exportable (CSV, Excel)
- Should run efficiently for all segments/vintages

### 3.4. Reporting
- Time series tables and charts for each segment/vintage:
  - Principal payments
  - Remaining balances
  - Charge-offs

### 3.5. Validation
- Backtest forecasts against historical data
- Provide accuracy metrics (e.g., MAPE, RMSE)

## 4. Milestones
- Data aggregation and cleaning
- Survival/hazard model implementation
- Forecast engine development
- Reporting/dashboarding
- Validation and backtesting

## 5. Risks & Mitigations
- Data sparsity in some segments/vintages → Aggregate or smooth rates as needed
- Model assumptions may not hold → Validate with historicals, allow manual overrides

## Project Structure Advice (Segment & Vintage Level)

1. **Data Preparation**
   - Aggregate loan data by segment and vintage (e.g., origination month/year, risk tier).
   - For each segment/vintage/month: calculate number of loans, principal outstanding, payments, charge-offs.
   - Handle right-censoring (loans still active at data cutoff).

2. **Modeling Approach**
   - Use survival/hazard models (Kaplan-Meier, Cox, or parametric) to estimate:
     - Probability of survival (not charged-off) each month.
     - Expected payment % and charge-off % per month.
   - Apply these rates to segment/vintage principal to forecast payments, balances, and charge-offs.

3. **Forecasting Engine**
   - For each future month, apply expected payment and charge-off rates to starting principal.
   - Update remaining balance iteratively.

4. **Reporting**
   - Output time series tables and charts by segment/vintage.
   - Show forecasted payments, balances, and charge-offs.